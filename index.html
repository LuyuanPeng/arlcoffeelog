<!DOCTYPE html>
<html>
<head>
    <title>Coffee Tracker</title>
</head>
<body>
    <h1>Coffee Tracker</h1>
    <div>
        <label>User ID: <input type="text" id="userID"></label>
    </div>
    <div>
        <label>Date: <input type="date" id="date"></label>
    </div>
    <div>
        <label>Coffee Count: <input type="number" id="coffeeCount"></label>
    </div>
    <div>
        <button onclick="logCoffee()">Log Coffee</button>
    </div>
    <div>
        <button onclick="showTotal()">Show Total</button>
    </div>
    <div id="totalDisplay"></div>
    <script>
        function logCoffee() {
            const userID = document.getElementById('userID').value;
            const date = document.getElementById('date').value;
            const coffeeCount = document.getElementById('coffeeCount').value;
            const url = 'https://script.google.com/macros/s/AKfycbym-ODmhPDbYIfd0oSaD2FYdtZCbpNyPWctBOQmu3C-_LbJQADixgXg-So8foXMXdSR/exec'; // Replace with your Apps Script Web App URL

            fetch(`${url}?action=logCoffee&userID=${userID}&date=${date}&coffeeCount=${coffeeCount}`, {
                method: 'POST'
            }).then(response => response.text())
              .then(data => alert('Coffee logged successfully!'))
              .catch(error => console.error('Error:', error));
        }

        function showTotal() {
            const userID = document.getElementById('userID').value;
            const url = 'https://script.google.com/macros/s/AKfycbym-ODmhPDbYIfd0oSaD2FYdtZCbpNyPWctBOQmu3C-_LbJQADixgXg-So8foXMXdSR/exec'; // Replace with your Apps Script Web App URL

            fetch(`${url}?action=getTotalCoffee&userID=${userID}`, {
                method: 'GET'
            }).then(response => response.text())
              .then(total => {
                  document.getElementById('totalDisplay').innerHTML = `Total coffee consumption: ${total} cups. <button onclick="promptPay()">PayNow?</button>`;
              })
              .catch(error => console.error('Error:', error));
        }

        function promptPay() {
            const total = document.getElementById('totalDisplay').textContent.split(' ')[3];
            alert(`Please pay the total amount to Luyuan 85351341`);
        }
    </script>
</body>
</html>
